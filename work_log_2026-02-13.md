# 책다리(BookBridge) 작업 로그 - 2026년 2월 13일

## 프로젝트 개요
- **앱 이름**: 책다리 (BookBridge)
- **플랫폼**: Flutter (iOS/Android/Web)
- **상태관리**: Riverpod 2.x
- **백엔드**: Firebase (Auth, Firestore, Storage, Messaging)

---

## 완료된 작업

### 1. 전체 화면-Provider 연결 (Task 17)
40개 이상의 화면을 Riverpod Provider에 실제로 연결하여 데이터가 흐르도록 구성.

**연결된 화면 목록:**
- **인증**: splash, login, signup, onboarding
- **홈**: home (도서 피드 + 위치 기반 필터링)
- **검색**: search (도서 검색 + 디바운스)
- **도서 상세**: book_detail (상세 정보 + 찜하기 + 교환 요청)
- **도서 등록**: book_search_register, manual_register, barcode_scan, book_condition
- **내 책장**: my_bookshelf (CRUD), book_edit
- **교환**: incoming_requests, exchange_history, exchange_request, requester_bookshelf, match_confirm, exchange_method
- **채팅**: chat_list, chat_room (실시간 메시지)
- **프로필**: my_profile, edit_profile, user_profile, settings
- **알림**: notification_list
- **북클럽**: book_club_list
- **찜목록**: wishlist
- **리뷰**: write_review
- **통계**: my_stats (환경 기여도 계산)

**수정된 버그:**
- `AuthRepository.signInWithEmail/signUpWithEmail` - named → positional 인자 수정
- `StorageService.hasSeenOnboarding` - 메서드 호출 → getter 수정
- `StorageService.setHasSeenOnboarding` - 올바른 메서드명으로 수정
- `MessageModel` - 필수 `id` 파라미터 추가
- `BookFeedCard` - `title` → `book` 파라미터 수정
- `UserModel.primaryLocation` - `location` → `primaryLocation` 필드명 수정 (3개 화면)
- `AppColors.tempHot` - `temperatureHigh` → `tempHot` 수정
- dead null-aware 연산자, 불필요한 non-null assertion, 미사용 import 제거

### 2. 외부 API 및 네이티브 설정 (Task 18)
- **API 키 관리**: `ApiConstants`를 `EnvConfig` 기반 getter로 변환 (환경변수 주입)
- **Android 설정**:
  - Google Services 플러그인 추가 (`settings.gradle`, `build.gradle`)
  - `minSdk = 23` 설정
  - MultiDex 활성화
  - `google-services.json` 플레이스홀더 생성
- **환경 파일**: `.env.example` 생성 (알라딘/네이버/카카오/Google Maps API 키)
- **보안**: `.gitignore`에 `.env`, Firebase 설정 파일 규칙 추가

### 3. 품질 검증
- **flutter analyze**: 0 errors, 0 warnings (142 info only)
- **flutter test**: 102/102 테스트 통과
- **flutter build web**: 빌드 성공

### 4. GitHub 배포
- **저장소**: https://github.com/cho-y-j/book.git
- **브랜치**: main
- **커밋**: 245 files, 12,918 insertions

---

## 프로젝트 구조

```
lib/
├── app/                    # 앱 설정 (라우팅, 테마)
├── core/                   # 핵심 유틸리티 (API, 서비스, 에러)
├── data/
│   ├── datasources/        # Firebase/API 데이터소스
│   ├── models/             # 데이터 모델 (15개)
│   └── repositories/       # 리포지토리 (9개)
├── features/               # Feature별 화면/위젯 (14개 Feature)
│   ├── auth/
│   ├── home/
│   ├── search/
│   ├── book_detail/
│   ├── book_register/
│   ├── my_bookshelf/
│   ├── exchange/
│   ├── chat/
│   ├── profile/
│   ├── notification/
│   ├── book_club/
│   ├── ranking/
│   ├── relay_exchange/
│   ├── review/
│   ├── stats/
│   ├── wishlist/
│   └── common/
├── providers/              # Riverpod Providers (7개 파일)
└── main.dart
```

---

## 다음 단계 (향후 작업)

### Stage 5: 실제 Firebase 연결 및 테스트
- Firebase 프로젝트 생성 및 실제 설정 파일 교체
- Firestore 인덱스 배포
- 에뮬레이터로 통합 테스트

### Stage 6: UI 폴리싱 및 UX 개선
- 로딩/에러 상태 통일
- 애니메이션 및 트랜지션 추가
- 반응형 레이아웃 점검

### Stage 7: 추가 기능 구현
- 릴레이 교환 로직 완성
- 북클럽 CRUD 구현
- 푸시 알림 (FCM) 연동
- 택배 교환 API 연동

### Stage 8: 배포 준비
- 앱 아이콘 및 스플래시 디자인
- iOS/Android 서명 설정
- Play Store / App Store 등록 준비
